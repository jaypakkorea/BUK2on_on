{% extends 'base.html' %}
{% load static %}


{% block content %}
<div style="margin:12rem;"></div>

<div class="container">

    <div style="display:flex; flex-direction:row; justify-content:space-between; " >
        <h1 class='section_title' >
            SEOUL 
        </h1>
        <a href="{% url 'buk2on_on:create' %}" class="btn_submit" style="background: none; border:none;  displax:flex; "><i class="fa-solid fa-plus" style="color:yellowgreen;"></i></a>
    </div>


    <div style ="display:flex; flex-direction:column-reverse; flex-wrap:no-wrap;">
        <div class="a_hover" style ="display:flex; gap: 20px 2%; flex:1 1 auto; flex-direction:row; flex-wrap:wrap; justify-content:flex-start; align-itmes:stretch; ">    
            {% for recommend  in recommends %}
            
            <div style="flex-grow:1; margin-bottom:28px;"> 
                <div id="modal_detail_feed" class="modal_overlay">
                    <div class="modal_window">
                        <div class="modal_title">
                            <div class="modal_title_side"></div>
                            <h3 style="font-family: Gowun Batang; font-weight:bold;"> {{recommend.name}} </h3>
                            <div class="modal_title_side">
                                <span id="close_modal" class="material-icons-outlined">
                                    <div > 
                                        <i class="fa-solid fa-x" style="color:darkgray;"></i>
                                    </div>
                                </span>
                            </div>
                        </div>
                        <div class="modal_image" style="display: flex; flex-direction:row" >
                            <div>
                                <div style="overflow:hidden; margin:0 auto; background-position: center; background-size:cover; width : 350px;">
                                    <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
                                        <div class="carousel-inner">
                                          <div class="carousel-item active">
                                            <img src="{{recommend.mainImage.url}}" class="d-block" style="left:10px; width:350px; height: 520px " alt="...">
                                          </div>
                                          {% for img in recommend.image.all %}
                                                <div class="carousel-item">
                                                <img src="{{img.image.url}}"  class="d-block" style="left:10px; width:350px; height: 520px " alt="..." >
                                                </div>
                                            {% endfor %}
                                        </div>
                                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                                          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                          <span class="visually-hidden">Previous</span>
                                        </button>
                                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                                          <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                          <span class="visually-hidden">Next</span>
                                        </button>
                                      </div>
                                    
                                    
                                      {% comment %} <img src="{{recommend.mainImage.url}}"  alt="{% static 'main_color.jpg' %}" style="position: absolute; left:10px; width:350px; height: 520px " > {% endcomment %}
                                </div>
                            </div>
                            <div style="display: flex; flex-direction:column;  align-items: flex-start; text-align : left; margin-left:20px; margin-right:20px;">
                                <div style="margin:1rem;"></div>
                                {% if user.profile_pic %}
                                    <a href="{% url 'accounts:profile' recommend.user %}">
                                        <img src="{{recommend.user.profile_pic.url}}" alt="no image"  width="45" height="45" style="border-radius : 70%; overflow:hidden; margin-right:1rem;">
                                        <span style=" text-decoration:none; color:gray; font-size:2rem; height:50%;">{{recommend.user}}</span>
                                    </a>
                                {% else %}
                                    <a href="{% url 'accounts:profile' recommend.user %}" style="text-decoration:none; display:flex; flex-direction : row; align-items : center;" >
                                        <img src=" {% static 'default_avatar2.jpg' %} " alt="no image"  width="45" height="45" style="border-radius : 70%; overflow:hidden; margin-right:1rem; ">
                                        <span class="detail_modal_recommend_user">{{recommend.user|upper}}</span>
                                    </a>
                                {% endif %}
                                <div style="margin:2rem;"></div>
                                {% if recommend.stars == 3 %}
                                    <p style = "margin-bottom:2rem;">★★★</p>
                                {% elif recommend.stars == 2 %}
                                    <p>★★</p>
                                {% elif recommend.stars == 1 %}
                                    <p>★</p>
                                {% elif recommend.stars == 0 %}
                                    <p>none</p>
                                {% endif %} 
                                <p class="detail_modal_text">{{recommend.adress}}</p>
                                <p class="detail_modal_text">{{recommend.bestMenu}}</p>
                                <p class="detail_modal_text">{{recommend.reason}}</p>
                            </div>
                        </div>
                    </div>
                </div>


                <div style= "width: 320px; height520px;">
                    <div   style="width: 320px; height : 480px; overflow:hidden; margin:0 auto; background-position: center; background-size:cover;">
                        <img id="detail_feed"  src="{{recommend.mainImage.url}}"  alt="{% static 'main_color.jpg' %}" style= "left:-50%; height:480px; width: 320px;" >
                    </div>
                        
                        {{recommend.name}}
                        {% if recommend.stars == 3 %}
                            <p>★★★</p>
                        {% elif recommend.stars == 2 %}
                            <p>★★</p>
                        {% elif recommend.stars == 1 %}
                            <p>★</p>
                        {% elif recommend.stars == 0 %}
                            <p>none</p>
                        {% endif %} 
                    </a>
                </div>
        
            </div>
            {% endfor %}
        </div>
    </div>
    
</div>
  
{% endblock content %}

